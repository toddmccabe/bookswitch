<error errors="errors"></error>

<div class="alert alert-success" ng-show="sent">
  Your message has been sent.
</div>

<div class="alert alert-warning" ng-show="inactiveUser">
  The other user has deactivated their account.
</div>

<book-preview book="book"></book-preview>

<div class="messages">
  <div class="message" ng-repeat="message in conversation.messages" ng-class="{'sender': message.sender_username == username}">
    <div class="well well-sm">
      {{message.body}}
    </div>
    <div class="info">
      {{message.created_at | date}}
      <a ui-sref="user.show({username: message.sender_username})">
        {{message.sender_username}}
      </a>
    </div>
  </div>
</div>

<form class="form-horizontal messages-update-form" autocomplete="off" ng-hide="inactiveUser">
  <div class="form-group">
    <label for="message" class="control-label col-md-4">
      Message
    </label>
    <div class="col-md-4">
      <textarea id="message" class="form-control" rows="3" ng-model="conversation.messageBody"></textarea>
    </div>
  </div>
  <div class="form-group">
    <div class="col-md-offset-4 col-md-4">
      <button type="submit" class="btn btn-primary" ng-click="update()">
        Send
      </button>
    </div>
  </div>
</form>
